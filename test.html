<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ - ç”Ÿç”£å¯†åº¦ãƒãƒ£ãƒ¬ãƒ³ã‚¸</title>
    <link rel="icon" href="favicon.svg" type="image/svg+xml">
    <style>
        body {
            font-family: 'Courier New', monospace;
            background-color: #1e1e1e;
            color: #ffffff;
            padding: 20px;
            line-height: 1.6;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
        }
        h1 {
            color: #4CAF50;
            text-align: center;
            margin-bottom: 30px;
        }
        #console {
            background-color: #000000;
            border: 1px solid #333;
            border-radius: 5px;
            padding: 20px;
            height: 600px;
            overflow-y: auto;
            font-size: 14px;
            white-space: pre-wrap;
        }
        .run-button {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 16px;
            border-radius: 5px;
            cursor: pointer;
            margin-bottom: 20px;
            display: block;
            margin-left: auto;
            margin-right: auto;
        }
        .run-button:hover {
            background-color: #45a049;
        }
        .info {
            background-color: #2d2d2d;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ§ª ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ - ç”Ÿç”£å¯†åº¦ãƒãƒ£ãƒ¬ãƒ³ã‚¸</h1>
        
        <div class="info">
            <h3>ğŸ“‹ ãƒ†ã‚¹ãƒˆå†…å®¹</h3>
            <ul>
                <li><strong>åœ°å½¢ç”Ÿæˆãƒ†ã‚¹ãƒˆ</strong>: åœ°å½¢ã®ç”Ÿæˆã€é‰±çŸ³é…ç½®ã€åº§æ¨™å–å¾—</li>
                <li><strong>å»ºç‰©ç®¡ç†ãƒ†ã‚¹ãƒˆ</strong>: å»ºç‰©ã®è¨­ç½®ãƒ»å‰Šé™¤ã€åˆ¶ç´„ãƒã‚§ãƒƒã‚¯</li>
                <li><strong>ã‚¢ã‚¤ãƒ†ãƒ ç®¡ç†ãƒ†ã‚¹ãƒˆ</strong>: ã‚¢ã‚¤ãƒ†ãƒ ã®ç§»å‹•ã€å›åã€åœæ­¢</li>
            </ul>
        </div>
        
        <button class="run-button" onclick="runTests()">ğŸš€ ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ</button>
        
        <div id="console"></div>
    </div>

    <script type="module">
        import { terrainTests } from './tests/terrain.test.js';
        import { buildingTests } from './tests/buildings.test.js';
        import { itemTests } from './tests/items.test.js';

        const consoleElement = document.getElementById('console');
        
        // ã‚³ãƒ³ã‚½ãƒ¼ãƒ«å‡ºåŠ›ã‚’HTMLã«è¡¨ç¤º
        const originalLog = console.log;
        const originalError = console.error;
        
        console.log = function(...args) {
            consoleElement.textContent += args.join(' ') + '\n';
            consoleElement.scrollTop = consoleElement.scrollHeight;
            originalLog.apply(console, args);
        };
        
        console.error = function(...args) {
            consoleElement.textContent += args.join(' ') + '\n';
            consoleElement.scrollTop = consoleElement.scrollHeight;
            originalError.apply(console, args);
        };

        window.runTests = async function() {
            consoleElement.textContent = '';
            
            try {
                console.log('ğŸš€ ç”Ÿç”£å¯†åº¦ãƒãƒ£ãƒ¬ãƒ³ã‚¸ - ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ\n');
                
                console.log('ğŸ“ åœ°å½¢ç”Ÿæˆãƒ†ã‚¹ãƒˆ');
                console.log('='.repeat(50));
                await terrainTests.runAll();
                
                console.log('\nğŸ—ï¸  å»ºç‰©ç®¡ç†ãƒ†ã‚¹ãƒˆ');
                console.log('='.repeat(50));
                await buildingTests.runAll();
                
                console.log('\nğŸ“¦ ã‚¢ã‚¤ãƒ†ãƒ ç®¡ç†ãƒ†ã‚¹ãƒˆ');
                console.log('='.repeat(50));
                await itemTests.runAll();
                
                // å…¨ä½“ã®çµæœ
                const totalPassed = terrainTests.results.passed + buildingTests.results.passed + itemTests.results.passed;
                const totalFailed = terrainTests.results.failed + buildingTests.results.failed + itemTests.results.failed;
                const totalTests = terrainTests.results.total + buildingTests.results.total + itemTests.results.total;
                
                console.log('\n' + '='.repeat(60));
                console.log('ğŸ¯ å…¨ä½“ãƒ†ã‚¹ãƒˆçµæœ');
                console.log('='.repeat(60));
                console.log(`âœ… æˆåŠŸ: ${totalPassed}`);
                console.log(`âŒ å¤±æ•—: ${totalFailed}`);
                console.log(`ğŸ“ˆ åˆè¨ˆ: ${totalTests}`);
                console.log(`ğŸ¯ æˆåŠŸç‡: ${((totalPassed / totalTests) * 100).toFixed(1)}%`);
                
                if (totalFailed === 0) {
                    console.log('\nğŸ‰ å…¨ãƒ†ã‚¹ãƒˆæˆåŠŸï¼ã‚³ãƒ¼ãƒ‰ã®å“è³ªãŒä¿è¨¼ã•ã‚Œã¦ã„ã¾ã™ã€‚');
                } else {
                    console.log('\nâš ï¸  å¤±æ•—ã—ãŸãƒ†ã‚¹ãƒˆãŒã‚ã‚Šã¾ã™ã€‚ä¿®æ­£ãŒå¿…è¦ã§ã™ã€‚');
                }
                
            } catch (error) {
                console.error('ãƒ†ã‚¹ãƒˆå®Ÿè¡Œä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ:', error);
            }
        };
    </script>
</body>
</html>
