# 初めての鉄鉱石採掘体験 - ゲーム仕様書

## 概要
Factorio風の簡易工場シミュレーションゲーム。プレイヤーは採掘機、ベルトコンベア、チェストを使って鉄鉱石の採掘・運搬・回収システムを構築する。

## 基本仕様

### ゲーム画面
- **マップサイズ**: 20x15のグリッド
- **セルサイズ**: 32x32ピクセル
- **キャンバスサイズ**: 640x480ピクセル
- **技術構成**: HTML5 Canvas + JavaScript（外部ライブラリなし）

### 地形システム
- **草地**: 緑色の背景、建物設置可能
- **鉱石エリア**: 茶色の背景 + 🪨アイコン、採掘機設置可能
- **鉱脈配置**: ランダム生成（20%の確率で鉱石エリア）

## 建物システム

### 1. 採掘機 (⛏️)
- **設置条件**: 鉱石エリア（🪨）のみ
- **機能**: 自動で鉄鉱石を採掘
- **採掘速度**: 2秒に1個
- **出力**: 鉄鉱石アイテム（🔩）
- **表示**: 灰色背景 + ⛏️絵文字

### 2. ベルトコンベア (➡️)
- **設置条件**: 任意の場所
- **機能**: アイテムを右方向に運搬
- **運搬速度**: 0.5秒に1マス移動
- **表示**: 青色背景 + ➡️絵文字

### 3. チェスト (📦)
- **設置条件**: 任意の場所
- **機能**: アイテムを自動回収
- **効果**: 鉄鉱石カウンターを増加
- **表示**: 金色背景 + 📦絵文字

## アイテムシステム

### 鉄鉱石 (🔩)
- **生成**: 採掘機により自動生成
- **移動**: ベルトコンベア上を右方向に移動
- **表示**: 白い背景円 + 🔩絵文字（パルス効果付き）
- **回収**: チェストに到達時に自動回収

## 移動ルール

### アイテム移動の詳細ロジック
1. **採掘機からの出力**
   - 採掘機の右隣にベルトがある場合のみアイテムが移動
   - ベルトがない場合はアイテムは採掘機上に留まる

2. **ベルト上の移動**
   - ベルト上のアイテムは右方向に移動を試みる
   - 次の位置にベルトまたはチェストがある場合のみ移動
   - 次の位置に何もない場合はベルト上で停止（重要な仕様）

3. **ベルトから外れた後**
   - 一度ベルトから外れたアイテムは画面端まで移動し続ける

4. **チェストでの回収**
   - アイテムがチェストに到達すると即座に回収
   - 鉄鉱石カウンターが1増加
   - アイテムは消去される

## 操作システム

### マウス操作
- **左クリック**: 選択中の建物を設置
- **右クリック**: 建物を削除
- **建物選択**: ツールバーのボタンで切り替え

### ツールバー
- **⛏️ 採掘機**: 鉱石採掘用
- **➡️ ベルト**: アイテム運搬用
- **📦 チェスト**: アイテム回収用

## UI要素

### 情報表示
- **鉄鉱石カウンター**: 回収した鉄鉱石の総数
- **デバッグ情報**: 建物数、アイテム数、ベルト上アイテム数

### ガイドシステム
- **ステップバイステップの遊び方**: 4段階の詳細説明
- **リアルタイムヒント**: ゲーム画面上に状況に応じたヒント表示
- **コツとヒント**: 効率的なプレイのためのアドバイス

## ゲームフロー

### 基本的なプレイサイクル
1. **🪨 鉱石エリアを見つける**
2. **⛏️ 採掘機を鉱石エリアに設置**
3. **➡️ ベルトで採掘機からチェストまでの運搬ラインを構築**
4. **📦 チェストをベルトの終点に設置**
5. **🔩 自動で鉄鉱石が採掘・運搬・回収される**

### 拡張可能な要素
- 複数の採掘機による生産量増加
- 長いベルトラインの構築
- 効率的な工場レイアウトの設計

## 技術仕様

### ファイル構成
```
factory-game/
├── index.html          # メインHTML
├── game.js            # ゲームロジック
├── style.css          # スタイルシート
├── hero-image.svg     # キービジュアル
└── GAME_SPECIFICATION.md # この仕様書
```

### 主要クラス・関数
- `Game`: メインゲームクラス
- `generateTerrain()`: 地形生成
- `placeBuilding()`: 建物設置
- `moveItems()`: アイテム移動処理
- `render()`: 描画処理

### 設定値
```javascript
const GRID_WIDTH = 20;
const GRID_HEIGHT = 15;
const CELL_SIZE = 32;
const MINING_INTERVAL = 120; // フレーム数（2秒）
const BELT_MOVE_INTERVAL = 30; // フレーム数（0.5秒）
```

## 学習目標

### プレイヤーが学べること
- **工場自動化の基本概念**
- **効率的な生産ラインの設計**
- **リソース管理の重要性**
- **システム思考の基礎**

## 今後の拡張可能性

### 追加可能な機能
- 新しい資源タイプ（銅鉱石、石炭など）
- 加工機械（製錬炉、組立機など）
- より複雑な製品（鉄板、歯車など）
- 研究・技術ツリー
- セーブ・ロード機能
- 統計・実績システム

### UI/UX改善
- アニメーション効果の追加
- サウンド効果
- より詳細なチュートリアル
- マルチプレイヤー対応

---

**作成日**: 2025年6月29日  
**バージョン**: 1.0  
**開発時間**: 約1時間  
**対象**: 初心者向け工場シミュレーション体験
